(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"2c8a":function(t,a,e){!function(a,e){t.exports=e()}(0,(function(){"use strict";function t(t,a){for(var e=0;e<a.length;e++){var i=a[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t){return function(t){if(Array.isArray(t)){for(var a=0,e=new Array(t.length);a<t.length;a++)e[a]=t[a];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var e=window.devicePixelRatio||1,i=10*e,s=i/2;return function(){function o(t,a){!function(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this,o),this.canvas=function(t){var a=document.getElementById(t),i=a.parentNode.clientWidth,s=a.parentNode.clientHeight;return a.style.width=i+"px",a.style.height=s+"px",a.width=i*e,a.height=s*e,a}(t),this.ctx=this.canvas.getContext("2d"),this.type="bar",this.showValue=!0,this.showGrid=!0,this.topPadding=60*e,this.leftPadding=50*e,this.rightPadding=10*e,this.bottomPadding=50*e,this.yEqual=5,this.yLength=0,this.xLength=0,this.ySpace=0,this.xRorate=0,this.yRorate=0,this.xRotate=0,this.yRotate=0,this.bgColor="#fff",this.axisColor="#666",this.gridColor="#eee",this.title={text:"",color:"#666",position:"top",font:"bold "+18*e+"px Arial",top:i,bottom:s},this.legend={display:!0,position:"top",color:"#666",font:14*e+"px Arial",top:45*e,bottom:15*e,textWidth:0},this.radius=100*e,this.innerRadius=60*e,this.colorList=["#4A90E2","#F5A623","#ff5858","#5e64ff","#2AC766","#743ee2","#b554ff","#199475"],this.init(a)}return function(a,e,i){e&&t(a.prototype,e),i&&t(a,i)}(o,[{key:"init",value:function(t){if(t.title=Object.assign({},this.title,t.title),t.legend=Object.assign({},this.legend,t.legend),Object.assign(this,t),!t.labels||!t.labels.length)throw new Error("缺少主要参数labels");if(!t.datasets||!t.datasets.length)throw new Error("缺少主要参数datasets");this.drawBackground(),"bar"===this.type||"line"===this.type?this.renderBarChart():this.renderPieChart(),this.drawLegend()}},{key:"renderBarChart",value:function(){this.yLength=Math.floor((this.canvas.height-this.topPadding-this.bottomPadding-i)/this.yEqual),this.xLength=Math.floor((this.canvas.width-this.leftPadding-this.rightPadding-i)/this.labels.length),this.ySpace=function(t,e){var i=t.map((function(t){return t.data.reduce((function(t,a){return a<t?t:a}))})),s=Math.ceil(Math.max.apply(Math,a(i))/e),o=s.toString().length-1;return o=2<o?2:o,Math.ceil(s/Math.pow(10,o))*Math.pow(10,o)}(this.datasets,this.yEqual),this.drawXAxis(),this.drawYAxis(),this.drawBarContent()}},{key:"drawBarContent",value:function(){var t=this.ctx,a=this.datasets.length;t.beginPath();for(var o=0;o<a;o++){t.font=this.legend.font,this.legend.textWidth+=Math.ceil(t.measureText(this.datasets[o].label).width),t.fillStyle=t.strokeStyle=this.datasets[o].fillColor||this.colorList[o];for(var n=this.datasets[o].data,r=0;r<n.length;r++)if(!(r>this.labels.length-1)){var l=this.xLength/(a+1),h=this.yLength/this.ySpace,d=this.leftPadding+this.xLength*r+l*(o+.5),c=d+l,g=this.canvas.height-this.bottomPadding,f=g-n[r]*h;if("bar"===this.type)t.fillRect(d,f,c-d,g-f),this.drawValue(n[r],d+l/2,f-s);else if("line"===this.type){var u=this.leftPadding+this.xLength*(r+.5);t.beginPath(),t.arc(u,f,3*e,0,2*Math.PI,!0),t.fill(),0!==r&&(t.beginPath(),t.strokeStyle=this.datasets[o].fillColor||this.colorList[o],t.lineWidth=2*e,t.moveTo(u-this.xLength,g-n[r-1]*h),t.lineTo(u,f),t.stroke(),t.lineWidth=1*e),this.drawValue(n[r],u,f-i)}}}t.stroke()}},{key:"renderPieChart",value:function(){for(var t=this.ctx,a=this.labels.length,e=this.datasets[0],i=e.data,s=i.reduce((function(t,a){return t+a})),o=-Math.PI/2,n=this.canvas.width/2,r=this.canvas.height/2,l=0;l<a;l++){t.font=this.legend.font,this.legend.textWidth+=Math.ceil(t.measureText(this.labels[l]).width),t.beginPath(),t.strokeStyle=t.fillStyle=e.colorList&&e.colorList[l]||this.colorList[l],t.moveTo(n,r);var h=o,d=o+=i[l]/s*2*Math.PI;t.arc(n,r,this.radius,h,d),t.closePath(),t.fill();var c=(h+d)/2;this.drawPieValue(i[l],c)}"ring"===this.type&&(t.beginPath(),t.fillStyle=this.bgColor,t.arc(n,r,this.innerRadius,0,2*Math.PI),t.closePath(),t.fill())}},{key:"drawValue",value:function(t,a,i){var s=this.ctx;this.showValue&&(s.textBaseline="middle",s.font=12*e+"px Arial",s.textAlign="center",s.fillText(t,a,i))}},{key:"drawPieValue",value:function(t,a){var e=this.ctx;if(this.showValue){var s=this.canvas.width/2,o=this.canvas.height/2,n=Math.ceil(Math.abs(this.radius*Math.cos(a))),r=Math.floor(Math.abs(this.radius*Math.sin(a)));e.textBaseline="middle",this.showValue&&(a<=0?(e.textAlign="left",e.moveTo(s+n,o-r),e.lineTo(s+n+i,o-r-i),e.moveTo(s+n+i,o-r-i),e.lineTo(s+n+3*i,o-r-i),e.stroke(),e.fillText(t,s+n+3.5*i,o-r-i)):0<a&&a<=Math.PI/2?(e.textAlign="left",e.moveTo(s+n,o+r),e.lineTo(s+n+i,o+r+i),e.moveTo(s+n+i,o+r+i),e.lineTo(s+n+3*i,o+r+i),e.stroke(),e.fillText(t,s+n+3.5*i,o+r+i)):a>Math.PI/2&&a<Math.PI?(e.textAlign="right",e.moveTo(s-n,o+r),e.lineTo(s-n-i,o+r+i),e.moveTo(s-n-i,o+r+i),e.lineTo(s-n-3*i,o+r+i),e.stroke(),e.fillText(t,s-n-3.5*i,o+r+i)):(e.textAlign="right",e.moveTo(s-n,o-r),e.lineTo(s-n-i,o-r-i),e.moveTo(s-n-i,o-r-i),e.lineTo(s-n-3*i,o-r-i),e.stroke(),e.fillText(t,s-n-3.5*i,o-r-i)))}}},{key:"drawBackground",value:function(){this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.drawTitle()}},{key:"drawTitle",value:function(){var t=this.title;if(t.text){var a=this.ctx;a.beginPath(),a.font=t.font,a.textAlign="center",a.fillStyle=t.color,"top"===t.position?(a.textBaseline="top",a.fillText(t.text,this.canvas.width/2,t.top)):(a.textBaseline="bottom",a.fillText(t.text,this.canvas.width/2,this.canvas.height-t.bottom))}}},{key:"drawXAxis",value:function(){var t=this.ctx,a=this.canvas.height-this.bottomPadding+.5;t.beginPath(),t.strokeStyle=this.axisColor,t.moveTo(this.leftPadding,a),t.lineTo(this.canvas.width-this.rightPadding,a),t.stroke(),this.drawXPoint()}},{key:"drawXPoint",value:function(){var t=this.ctx;t.beginPath(),t.font=12*e+"px Microsoft YaHei",t.textAlign=this.xRorate||this.xRotate?"right":"center",t.textBaseline="top",t.fillStyle=this.axisColor;for(var a=0;a<this.labels.length;a++){var o=this.labels[a],n=this.leftPadding+this.xLength*(a+1)+.5,r=this.canvas.height-this.bottomPadding;this.showGrid?(t.strokeStyle=this.gridColor,t.moveTo(n,r),t.lineTo(n,this.topPadding+i)):(t.moveTo(n,r),t.lineTo(n,r-s)),t.stroke(),t.save(),t.translate(n-this.xLength/2,r+s),this.xRorate?t.rotate(-this.xRorate*Math.PI/180):t.rotate(-this.xRotate*Math.PI/180),t.fillText(o,0,0),t.restore()}}},{key:"drawYAxis",value:function(){var t=this.ctx;t.beginPath(),t.strokeStyle=this.axisColor,t.moveTo(this.leftPadding-.5,this.canvas.height-this.bottomPadding+.5),t.lineTo(this.leftPadding-.5,this.topPadding+.5),t.stroke(),this.drawYPoint()}},{key:"drawYPoint",value:function(){var t=this.ctx;t.font=12*e+"px Microsoft YaHei",t.textAlign="right",t.textBaseline="middle",t.beginPath();for(var a=0;a<this.yEqual;a++){var o=this.leftPadding,n=this.canvas.height-this.bottomPadding-this.yLength*(a+1)+.5;this.showGrid?(t.strokeStyle=this.gridColor,t.moveTo(o,n),t.lineTo(this.canvas.width-this.rightPadding-i,n)):(t.strokeStyle=this.axisColor,t.moveTo(o-s,n),t.lineTo(o,n)),t.stroke(),t.save(),t.fillStyle=this.axisColor,t.translate(o-i,n),this.yRorate?t.rotate(-this.yRorate*Math.PI/180):t.rotate(-this.yRotate*Math.PI/180),t.fillText(this.ySpace*(a+1),0,0),t.restore()}}},{key:"drawLegend",value:function(){var t=this.legend;if(t.display){var a=this.ctx,e="pie"===this.type||"ring"===this.type;a.beginPath(),a.font=t.font,a.textAlign="left",a.textBaseline="middle";for(var o=e?this.labels.length:this.datasets.length,n=(this.canvas.width-(this.legend.textWidth+(5*o-2)*i))/2,r=0,l=0;l<o;l++){var h=e?this.datasets[0]:this.datasets[l],d=(e?this.labels[l]:h.label)||"";a.fillStyle=h.colorList&&h.colorList[l]||h.fillColor||this.colorList[l],"top"===t.position?(this.drawLegendIcon(n+5*i*l+r,t.top-s,2*i,i),a.fillStyle=t.color,a.fillText(d,n+(5*l+3)*i+r,t.top)):"bottom"===t.position?(this.drawLegendIcon(n+5*i*l+r,this.canvas.height-t.bottom-s,2*i,i),a.fillStyle=t.color,a.fillText(d,n+(5*l+3)*i+r,this.canvas.height-t.bottom)):(a.fillRect(i,t.top+2*i*l,2*i,i),a.fillStyle=t.color,a.fillText(d,4*i,t.top+2*i*l+.5*i)),r+=Math.ceil(a.measureText(d).width)}}}},{key:"drawLegendIcon",value:function(t,a,o,n){var r=this.ctx;"line"===this.type?(r.beginPath(),r.strokeStyle=r.fillStyle,r.lineWidth=2*e,r.moveTo(t,a+s),r.lineTo(t+2*i,a+s),r.stroke(),r.lineWidth=1*e,r.arc(t+i,a+s,3*e,0,2*Math.PI,!0),r.fill()):r.fillRect(t,a,o,n)}}]),o}()}))},"4c45":function(t,a,e){t.exports=e.p+"static/img/head.1d9c88d2.png"},"7ed4":function(t,a,e){"use strict";var i=e("2b0e"),s=new i["default"];a["a"]=s},"9f37":function(t,a,e){"use strict";var i=e("daa9"),s=e.n(i);s.a},ade3:function(t,a,e){"use strict";function i(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}e.d(a,"a",(function(){return i}))},daa9:function(t,a,e){},e05f:function(t,a,e){},e2ad:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{gutter:20}},[i("el-col",{attrs:{span:8,lg:8,xs:24,sm:24}},[i("el-card",{staticClass:"mgb20",staticStyle:{height:"252px"},attrs:{shadow:"hover"}},[i("div",{staticClass:"user-info"},[i("img",{staticClass:"user-avator",attrs:{src:e("4c45"),alt:""}}),i("div",{staticClass:"user-info-cont"},[i("div",{staticClass:"user-info-name"},[t._v(t._s(t.name))]),i("div",[t._v(t._s(t.type))])])]),i("div",{staticClass:"user-info-list"},[t._v("\n                    加入电教中心时间：\n                    "),i("span",[t._v(t._s(t.addtime))])]),i("div",{staticClass:"user-info-list"},[t._v("\n                    你登录的账号 ：\n                    "),i("span",[t._v(t._s(t.username))])])]),i("el-card",{staticStyle:{height:"252px"},attrs:{shadow:"hover","hidden-sm-only":""}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("服务器监控")])]),t._v("内存\n                "),i("el-progress",{attrs:{percentage:t.memory,color:"#42b983"}}),t._v("CPU\n                "),i("el-progress",{attrs:{percentage:t.cpu,color:"#f1e05a"}}),t._v("硬盘\n                "),i("el-progress",{attrs:{percentage:t.disk}})],1)],1),i("el-col",{attrs:{span:8,lg:16,xs:24,sm:24,"hidden-xs-only":""}},[i("el-row",{staticClass:"mgb20",attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[i("div",{staticClass:"grid-content grid-con-1"},[i("i",{staticClass:"el-icon-lx-people grid-con-icon"}),i("div",{staticClass:"grid-cont-right"},[i("div",{staticClass:"grid-num"},[t._v(t._s(t.fault))]),i("div",[t._v("今天处理故障次数")])])])])],1),i("el-col",{attrs:{span:8}},[i("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[i("div",{staticClass:"grid-content grid-con-2"},[i("i",{staticClass:"el-icon-lx-notice grid-con-icon"}),i("div",{staticClass:"grid-cont-right"},[i("div",{staticClass:"grid-num"},[t._v(t._s(t.today))]),i("div",[t._v("今天接到电话次数")])])])])],1),i("el-col",{attrs:{span:8}},[i("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[i("div",{staticClass:"grid-content grid-con-3"},[i("i",{staticClass:"el-icon-lx-goods grid-con-icon"}),i("div",{staticClass:"grid-cont-right"},[i("div",{staticClass:"grid-num"},[t._v(t._s(t.thismonth))]),i("div",[t._v("本月支出费用")])])])])],1)],1),i("el-card",{attrs:{shadow:"hover"}},[i("schart",{ref:"bar",staticClass:"schart",attrs:{canvasId:"bar",options:t.options}})],1)],1)],1)],1)},s=[],o=(e("ac6a"),e("7f7f"),e("f5ac")),n=e("7ed4"),r=(e("e05f"),{name:"dashboard",data:function(){return{name:localStorage.getItem("ms_username"),addtime:"",username:"",fault:"",today:"",thismonth:"",type:"",memory:0,loading:!1,cpu:0,disk:0,options:{type:"line",title:{text:"最近一周故障处理数"},xRorate:25,labels:[],datasets:[{label:"投影仪",data:[]},{label:"网络",data:[]},{label:"云桌面",data:[]},{label:"功放或音箱",data:[]},{label:"电脑",data:[]},{label:"幕布",data:[]},{label:"扩音器或麦克风",data:[]},{label:"其他",data:[]}]}}},components:{Schart:o["a"]},created:function(){this.convert()},watch:{$route:{handler:function(t,a){var e=this;"/dashboard"===t.path&&e.convert()},deep:!0}},methods:{convert:function(){var t=this;this.loading=!0,this.$axios.get("/DashBoard").then((function(a){200===a.data.code?(t.name=a.data.data.name,t.addtime=a.data.data.addtime,t.username=a.data.data.username,t.fault=a.data.data.fault,t.today=a.data.data.today,t.thismonth=a.data.data.thismonth,t.type=a.data.data.type,t.memory=parseInt(a.data.data.memory),t.cpu=parseInt(a.data.data.cpu),t.disk=parseInt(a.data.data.disk),localStorage.setItem("type",a.data.data.type),localStorage.setItem("name",a.data.data.name),n["a"].$emit("type",a.data.data.type)):400===a.data.code?t.$message.error("查询失败:"+a.data.message):403===a.data.code?(t.$message.error("查询失败:"+a.data.message),t.loading=!1,t.$router.push({path:"/login"})):500===a.data.code&&alert("请截图以下信息报给维护员: 出错位置：dasboard.convert 出错详情: "+a.data.message),t.loading=!1})).catch((function(a){t.$message.error(a.message)})),this.$axios.get("/ChartRepair").then((function(a){200===a.data.code?(t.options.labels=a.data.data.a1,t.options.datasets[0].data=a.data.data.a2,t.options.datasets[1].data=a.data.data.a3,t.options.datasets[2].data=a.data.data.a4,t.options.datasets[3].data=a.data.data.a5,t.options.datasets[4].data=a.data.data.a6,t.options.datasets[5].data=a.data.data.a7,t.options.datasets[6].data=a.data.data.a8,t.options.datasets[7].data=a.data.data.a9):400===a.data.code?t.$message.error("查询失败:"+a.data.message):403===a.data.code?(t.$message.error("查询失败:"+a.data.message),t.loading=!1,t.$router.push({path:"/login"})):500===a.data.code&&alert("请截图以下信息报给维护员: 出错位置：dashboard.convert 出错详情: "+a.data.message),t.loading=!1})).catch((function(a){t.$message.error(a.message)}))},changeDate:function(){var t=(new Date).getTime();this.data.forEach((function(a,e){var i=new Date(t-864e5*(6-e));a.name="".concat(i.getFullYear(),"/").concat(i.getMonth()+1,"/").concat(i.getDate())}))}}}),l=r,h=(e("9f37"),e("2877")),d=Object(h["a"])(l,i,s,!1,null,"bd9b4a18",null);a["default"]=d.exports},f5ac:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("canvas",{attrs:{id:t.canvasId}})])},s=[],o=(e("8e6e"),e("ac6a"),e("456d"),e("ade3")),n=e("2c8a"),r=e.n(n);function l(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);a&&(i=i.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,i)}return e}function h(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?l(Object(e),!0).forEach((function(a){Object(o["a"])(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}var d={props:{canvasId:{type:String,default:"",required:!0},options:{type:Object,required:!0}},mounted:function(){this.renderChart()},methods:{renderChart:function(){if(this.checkOptions()){var t=h({},this.options);new r.a(this.canvasId,t)}},checkOptions:function(){var t=this.options;return!(!t.datasets||!t.datasets.length)&&!(!t.labels||!t.labels.length)}},watch:{options:{handler:function(t,a){this.renderChart()},deep:!0}}},c=d,g=e("2877"),f=Object(g["a"])(c,i,s,!1,null,null,null);a["a"]=f.exports}}]);